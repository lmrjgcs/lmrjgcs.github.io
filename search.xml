<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[sqldeveloper工具监视oracle语句配置]]></title>
      <url>https://lmrjgcs.github.io/2017/02/23/sqldeveloper%E5%B7%A5%E5%85%B7%E7%9B%91%E8%A7%86oracle%E8%AF%AD%E5%8F%A5%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h1 id="oracle客户端安装"><a href="#oracle客户端安装" class="headerlink" title="oracle客户端安装"></a>oracle客户端安装</h1><h2 id="先安装-net4-0或之上版本"><a href="#先安装-net4-0或之上版本" class="headerlink" title="先安装.net4.0或之上版本"></a>先安装.net4.0或之上版本</h2><h2 id="安装oracle客户端"><a href="#安装oracle客户端" class="headerlink" title="安装oracle客户端"></a>安装oracle客户端</h2><p><a href="ftp://192.168.5.53/software/tools/DataBase/win32_11gR2_client.zip" target="_blank" rel="external">客户端下载32位</a><br><a href="ftp://192.168.5.53/software/tools/DataBase/win64_11gR2_client.zip" target="_blank" rel="external">客户端下载64位</a><br>进入安装，选运行时模式安装，如图1：<br><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/1.png" alt="图片1"><br>接下来一直下一步到完成安装</p>
<h2 id="客户端连接配置"><a href="#客户端连接配置" class="headerlink" title="客户端连接配置"></a>客户端连接配置</h2><p>找到NetManager，如图2：<br><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/2.png" alt="图片2"><br>接下来配置，如图3，图4，图5，图6，图7，图8：<br><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/3.png" alt="图片3"><br><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/4.png" alt="图片4"><br><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/5.png" alt="图片5"><br><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/6.png" alt="图片6"><br><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/7.png" alt="图片7"><br><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/8.png" alt="图片8"><br>点击更改登录：用创建的数据库用户名和密码登录<br>然后点击测试成功后确定，并在文件-保存网络配置</p>
<h1 id="配置sqldeveloper"><a href="#配置sqldeveloper" class="headerlink" title="配置sqldeveloper"></a>配置sqldeveloper</h1><p><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/QQ截图20170223153652.png" alt="图片9"></p>
<ul>
<li>连接名自定义</li>
<li>用户名和密码输入oracle对应的</li>
<li>连接类型选为TNS</li>
<li>网络别名选择上面创建的网络服务名</li>
<li>测试连接</li>
</ul>
<h2 id="监视SQL"><a href="#监视SQL" class="headerlink" title="监视SQL"></a>监视SQL</h2><p><img src="/2017/02/23/sqldeveloper工具监视oracle语句配置/QQ图片20170223154206.png" alt="图片10"><br>点开监视SQL<br>查看DURATION列值大小，此列是代表持续时间长的</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hexo多git分支使用]]></title>
      <url>https://lmrjgcs.github.io/2017/02/20/hexo%E5%A4%9Agit%E5%88%86%E6%94%AF%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<h1 id="分支简介"><a href="#分支简介" class="headerlink" title="分支简介"></a>分支简介</h1><ul>
<li>master分支：主分支，公司博客展现文章所在的分支</li>
<li>personal-dev分支：个人编辑分支，个人写文章所在的分支，写好的文章供master和personal分支合并过去</li>
<li>personal分支：个人分支，合并personal-dev分支里的文章，静态化后部署到github展现</li>
<li>work分支：工作分支，工作内容编写所在的分支，编写完成后供master分支合并过去</li>
</ul>
<h1 id="分支图解"><a href="#分支图解" class="headerlink" title="分支图解"></a>分支图解</h1><p><img src="/2017/02/20/hexo多git分支使用/QQ截图20170220170827.png" alt="图片1"></p>
<h1 id="分支使用详解"><a href="#分支使用详解" class="headerlink" title="分支使用详解"></a>分支使用详解</h1><h2 id="从远端获取仓库"><a href="#从远端获取仓库" class="headerlink" title="从远端获取仓库"></a>从远端获取仓库</h2><p><img src="/2017/02/20/hexo多git分支使用/QQ截图20170221110801.png" alt="图片2"></p>
<h2 id="创建personal-dev分支"><a href="#创建personal-dev分支" class="headerlink" title="创建personal-dev分支"></a>创建personal-dev分支</h2><ul>
<li>指定新分支名并勾上检出新分支，如图3:<br><img src="/2017/02/20/hexo多git分支使用/QQ截图20170221103408.png" alt="图片3"></li>
<li>进入分支目录后删除personal-dev分支里_posts文件夹里的内容，暂存文件到工作区，指定提交记录信息，不要勾选立即推送变更到远端，然后提交，如图4、图5：<br><img src="/2017/02/20/hexo多git分支使用/QQ截图20170221103623.png" alt="图片4"><br><img src="/2017/02/20/hexo多git分支使用/QQ截图20170221104121.png" alt="图片5"></li>
<li>双击master切换到master分支，把personal-dev分支里删除提交HEAD指针指到master(把删除提交合并到master，然后撤销提交，防止以后写文章提交合并时对master分支也进行删除文章动作)，合并前选择要合并的提交并去掉立即提交合并前的勾，合并后撤销合并进行回滚提交，最后进行推送到远端，如图6、图7:<br><img src="/2017/02/20/hexo多git分支使用/QQ截图20170221104949.png" alt="图片6"><br><img src="/2017/02/20/hexo多git分支使用/QQ截图20170221105227.png" alt="图片7"></li>
</ul>
<h2 id="创建personal分支"><a href="#创建personal分支" class="headerlink" title="创建personal分支"></a>创建personal分支</h2><p>双击personal-dev切换到personal-dev分支，然后指定分支名，如图8<br><img src="/2017/02/20/hexo多git分支使用/QQ截图20170221105531.png" alt="图片8"></p>
<h2 id="创建work分支"><a href="#创建work分支" class="headerlink" title="创建work分支"></a>创建work分支</h2><p>双击master切换到master分支，其他操作同上personal-dev分支的建立，创建完成后，工作内容文章在此分支下编写</p>
<h1 id="多分支下文章编写及发布"><a href="#多分支下文章编写及发布" class="headerlink" title="多分支下文章编写及发布"></a>多分支下文章编写及发布</h1><h2 id="个人文章"><a href="#个人文章" class="headerlink" title="个人文章"></a>个人文章</h2><ul>
<li>双击personal-dev切换到personal-dev分支下，然后使用hexo n postname命令创建文章，进而进行文章编写</li>
<li>文章编写完成后，可分别切换到master和personal分支里将编写文章的提交合并过来发布</li>
</ul>
<h2 id="工作文章"><a href="#工作文章" class="headerlink" title="工作文章"></a>工作文章</h2><ul>
<li>双击work切换到work分支下，然后使用hexo n postname命令创建文章，进而进行文章编写</li>
<li>文章编写完成后，切换到master分支将新编写文章的提交合并过来发布</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hexo使用说明]]></title>
      <url>https://lmrjgcs.github.io/2017/02/10/hexo%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/</url>
      <content type="html"><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="node和npm环境安装"><a href="#node和npm环境安装" class="headerlink" title="node和npm环境安装"></a>node和npm环境安装</h2><p>下载地址：<br><a href="https://nodejs.org/zh-cn/" target="_blank" rel="external">node.js官网</a><br>下载最新版安装，node安装的同时，npm也跟着安装</p>
<h2 id="hexo安装"><a href="#hexo安装" class="headerlink" title="hexo安装"></a>hexo安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g hexo</div></pre></td></tr></table></figure>
<h2 id="确认安装完成"><a href="#确认安装完成" class="headerlink" title="确认安装完成"></a>确认安装完成</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo -v #查看安装版本信息</div></pre></td></tr></table></figure>
<h1 id="建立博客站点"><a href="#建立博客站点" class="headerlink" title="建立博客站点"></a>建立博客站点</h1><p>按住shift右击某一本地磁盘或磁盘下的某一文件夹，进入命令行编辑模式，见图1、图2：<br><img src="/2017/02/10/hexo使用说明/QQ截图20170210154000.png" alt="图1"></p>
<p><img src="/2017/02/10/hexo使用说明/QQ截图20170210154302.png" alt="图2"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo init blog-name  #创建博客站点</div></pre></td></tr></table></figure></p>
<h1 id="配置博客配置文件及主题"><a href="#配置博客配置文件及主题" class="headerlink" title="配置博客配置文件及主题"></a>配置博客配置文件及主题</h1><p>参照hexo服务端安装部署文章</p>
<h1 id="新建及写文章"><a href="#新建及写文章" class="headerlink" title="新建及写文章"></a>新建及写文章</h1><h2 id="更改文章生成模板"><a href="#更改文章生成模板" class="headerlink" title="更改文章生成模板"></a>更改文章生成模板</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">打开博客站点目录下scaffolds/post.md</div><div class="line">参照如下更改</div><div class="line">---</div><div class="line">title: &#123;&#123; title &#125;&#125;	#文章标题</div><div class="line">date: &#123;&#123; date &#125;&#125;	#文章日期</div><div class="line">categories:	#分类</div><div class="line">tags: #标签</div><div class="line">author:  #作者</div><div class="line">---</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo n article-name  #新建文章</div></pre></td></tr></table></figure>
<ul>
<li>生成的文章写上分类、标签、作者，文章内容采用markdown格式撰写</li>
<li>文章中所需的图片存放在对应文章名字的文件夹里，并采用如下格式引用<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">![图片](文章名/图片名)</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="预览博客"><a href="#预览博客" class="headerlink" title="预览博客"></a>预览博客</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hexo s #启动预览</div><div class="line">http://localhost:4000或http://本机ip:4000 #用此网址访问博客</div></pre></td></tr></table></figure>
<h1 id="结合git使用"><a href="#结合git使用" class="headerlink" title="结合git使用"></a>结合git使用</h1><ul>
<li>新建博客站点</li>
<li>删除博客站点目录下source文件夹里的_post文件夹</li>
<li>用sourceTree克隆gitlab上的source仓库，source仓库地址：git@gitlab地址:aachina/source.git，并指定目标路径为博客目录下的source文件夹下，见下图3:<br><img src="/2017/02/10/hexo使用说明/QQ截图20170210160837.png" alt="图3"></li>
<li>克隆后根据需要创建personal(个人)和work(工作)分支，个人和工作分支可以建立只有本地分支</li>
<li>删除个人分支下的公司方面的内容，并提交</li>
<li><p>在个人分支或工作分支创建的博客，需要推送到master分支上的内容需要进行如下操作:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">切换到master分支</div><div class="line">进入命令行模式，执行如下命令：</div><div class="line">git checkout branch-name filename/foldername #把其他分支里的文件或文件夹复制到master分支上</div></pre></td></tr></table></figure>
</li>
<li><p>提交推送到远端master分支，有push动作就会触发gitlab-webhooks，进而博客更新</p>
<p>​</p>
</li>
</ul>
<h1 id="发布个人博客到github"><a href="#发布个人博客到github" class="headerlink" title="发布个人博客到github"></a>发布个人博客到github</h1><h2 id="登录github创建项目"><a href="#登录github创建项目" class="headerlink" title="登录github创建项目"></a>登录github创建项目</h2><p>项目组成：github账户名称/github账户名称.github.io 如：lmrjgcs.github.io</p>
<h2 id="配置ssh共享秘钥"><a href="#配置ssh共享秘钥" class="headerlink" title="配置ssh共享秘钥"></a>配置ssh共享秘钥</h2><ul>
<li>打开sourceTree的命令行工具</li>
<li><p>执行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sshkeygen -t rsa -C &quot;email-address&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>找到生成的公共秘钥文件，常规生成路径如:C:\Users\lium.ssh\id_rsa.pub</p>
</li>
<li>复制id_rsa.pub内容到github项目下，见图4:<br><img src="/2017/02/10/hexo使用说明/QQ截图20170210162805.png" alt="图4"><h2 id="安装git插件"><a href="#安装git插件" class="headerlink" title="安装git插件"></a>安装git插件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="配置站点配置文件-config-yml"><a href="#配置站点配置文件-config-yml" class="headerlink" title="配置站点配置文件_config.yml"></a>配置站点配置文件_config.yml</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">url: https://lmrjgcs.github.io</div><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repo: git@github.com:lmrjgcs/lmrjgcs.github.io.git #改为自己创建的git地址</div><div class="line">  branch: master #指定分支</div></pre></td></tr></table></figure>
<h2 id="静态化"><a href="#静态化" class="headerlink" title="静态化"></a>静态化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo generator 或 hexo g</div></pre></td></tr></table></figure>
<h2 id="部署到github上"><a href="#部署到github上" class="headerlink" title="部署到github上"></a>部署到github上</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo deploy 或 hexo d</div></pre></td></tr></table></figure>
<h2 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">https://lmrjgcs.github.io   #此为我的博客地址，改成自己的即可</div></pre></td></tr></table></figure>
<h1 id="参照链接："><a href="#参照链接：" class="headerlink" title="参照链接："></a>参照链接：</h1><ul>
<li><a href="https://hexo.io/zh-cn/" target="_blank" rel="external">hexo中文官网</a></li>
<li><a href="http://www.tuicool.com/articles/umEBVfI" target="_blank" rel="external">hexo无法使用本地图片</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[让jacman主题支持本地搜索]]></title>
      <url>https://lmrjgcs.github.io/2017/02/09/%E8%AE%A9jacman%E4%B8%BB%E9%A2%98%E6%94%AF%E6%8C%81%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2/</url>
      <content type="html"><![CDATA[<h1 id="修改主题配置文件-config-yml"><a href="#修改主题配置文件-config-yml" class="headerlink" title="修改主题配置文件_config.yml"></a>修改主题配置文件_config.yml</h1><p>在widgets:下加入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- search</div></pre></td></tr></table></figure></p>
<h1 id="source-js-search-js下创建searchFunc函数"><a href="#source-js-search-js下创建searchFunc函数" class="headerlink" title="source/js/search.js下创建searchFunc函数"></a>source/js/search.js下创建searchFunc函数</h1><p>内容如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div></pre></td><td class="code"><pre><div class="line">// A local search script with the help of [hexo-generator-search](https://github.com/PaicHyperionDev/hexo-generator-search)</div><div class="line">// Copyright (C) 2015 </div><div class="line">// Joseph Pan &lt;http://github.com/wzpan&gt;</div><div class="line">// Shuhao Mao &lt;http://github.com/maoshuhao&gt;</div><div class="line">// This library is free software; you can redistribute it and/or modify</div><div class="line">// it under the terms of the GNU Lesser General Public License as</div><div class="line">// published by the Free Software Foundation; either version 2.1 of the</div><div class="line">// License, or (at your option) any later version.</div><div class="line">// </div><div class="line">// This library is distributed in the hope that it will be useful, but</div><div class="line">// WITHOUT ANY WARRANTY; without even the implied warranty of</div><div class="line">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</div><div class="line">// Lesser General Public License for more details.</div><div class="line">// </div><div class="line">// You should have received a copy of the GNU Lesser General Public</div><div class="line">// License along with this library; if not, write to the Free Software</div><div class="line">// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA</div><div class="line">// 02110-1301 USA</div><div class="line">// </div><div class="line"></div><div class="line">var searchFunc = function(path, search_id, content_id) &#123;</div><div class="line">    &apos;use strict&apos;;</div><div class="line">    $.ajax(&#123;</div><div class="line">        url: path,</div><div class="line">        dataType: &quot;xml&quot;,</div><div class="line">        success: function( xmlResponse ) &#123;</div><div class="line">            // get the contents from search data</div><div class="line">            var datas = $( &quot;entry&quot;, xmlResponse ).map(function() &#123;</div><div class="line">                return &#123;</div><div class="line">                    title: $( &quot;title&quot;, this ).text(),</div><div class="line">                    content: $(&quot;content&quot;,this).text(),</div><div class="line">                    url: $( &quot;url&quot; , this).text()</div><div class="line">                &#125;;</div><div class="line">            &#125;).get();</div><div class="line"></div><div class="line">            var $input = document.getElementById(search_id);</div><div class="line">            var $resultContent = document.getElementById(content_id);</div><div class="line"></div><div class="line">            $input.addEventListener(&apos;input&apos;, function()&#123;</div><div class="line">                var str=&apos;&lt;ul class=\&quot;search-result-list\&quot;&gt;&apos;;                </div><div class="line">                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);</div><div class="line">                $resultContent.innerHTML = &quot;&quot;;</div><div class="line">                if (this.value.trim().length &lt;= 0) &#123;</div><div class="line">                    return;</div><div class="line">                &#125;</div><div class="line">                // perform local searching</div><div class="line">                datas.forEach(function(data) &#123;</div><div class="line">                    var isMatch = true;</div><div class="line">                    var content_index = [];                                                       </div><div class="line">                    if (!data.title || data.title.trim() === &apos;&apos;) &#123;</div><div class="line">                        data.title = &quot;Untitled&quot;;</div><div class="line">                    &#125;</div><div class="line">                    var data_title = data.title.trim().toLowerCase();     </div><div class="line">                    var data_content = data.content.trim().replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;).toLowerCase();</div><div class="line">                    var data_url = data.url;</div><div class="line">                    var index_title = -1;</div><div class="line">                    var index_content = -1;</div><div class="line">                    var first_occur = -1;</div><div class="line">                    // only match artiles with not empty contents</div><div class="line">                    if (data_content !== &apos;&apos;) &#123;</div><div class="line">                        keywords.forEach(function(keyword, i) &#123;</div><div class="line">                            index_title = data_title.indexOf(keyword);</div><div class="line">                            index_content = data_content.indexOf(keyword);</div><div class="line"></div><div class="line">                            if( index_title &lt; 0 &amp;&amp; index_content &lt; 0 )&#123;</div><div class="line">                                isMatch = false;</div><div class="line">                            &#125; else &#123;</div><div class="line">                                if (index_content &lt; 0) &#123;</div><div class="line">                                    index_content = 0;</div><div class="line">                                &#125;</div><div class="line">                                if (i == 0) &#123;</div><div class="line">                                    first_occur = index_content;</div><div class="line">                                &#125;</div><div class="line">                                // content_index.push(&#123;index_content:index_content, keyword_len:keyword_len&#125;);</div><div class="line">                            &#125;</div><div class="line">                        &#125;);</div><div class="line">                    &#125; else &#123;</div><div class="line">                        isMatch = false;</div><div class="line">                    &#125;</div><div class="line">                    // show search results</div><div class="line">                    if (isMatch) &#123;</div><div class="line">                        str += &quot;&lt;li&gt;&lt;a style=&apos;color:red;font-weight:bold&apos; href=&apos;&quot;+ data_url +&quot;&apos; class=&apos;search-result-title&apos;&gt;&quot;+ data_title +&quot;&lt;/a&gt;&quot;;</div><div class="line">                        var content = data.content.trim().replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;);</div><div class="line">                        if (first_occur &gt;= 0) &#123;</div><div class="line">                            // cut out 100 characters</div><div class="line">                            var start = first_occur - 20;</div><div class="line">                            var end = first_occur + 80;</div><div class="line"></div><div class="line">                            if(start &lt; 0)&#123;</div><div class="line">                                start = 0;</div><div class="line">                            &#125;</div><div class="line"></div><div class="line">                            if(start == 0)&#123;</div><div class="line">                                end = 100;</div><div class="line">                            &#125;</div><div class="line"></div><div class="line">                            if(end &gt; content.length)&#123;</div><div class="line">                                end = content.length;</div><div class="line">                            &#125;</div><div class="line"></div><div class="line">                            var match_content = content.substr(start, end); </div><div class="line"></div><div class="line">                            // highlight all keywords</div><div class="line">                            keywords.forEach(function(keyword)&#123;</div><div class="line">                                var regS = new RegExp(keyword, &quot;gi&quot;);</div><div class="line">                                match_content = match_content.replace(regS, &quot;&lt;em class=\&quot;search-keyword\&quot;&gt;&quot;+keyword+&quot;&lt;/em&gt;&quot;);</div><div class="line">                            &#125;);</div><div class="line">                            </div><div class="line">                            str += &quot;&lt;p class=\&quot;search-result\&quot;&gt;&quot; + match_content +&quot;...&lt;/p&gt;&quot;</div><div class="line">                        &#125;</div><div class="line">                        str += &quot;&lt;/li&gt;&quot;;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                str += &quot;&lt;/ul&gt;&quot;;</div><div class="line">                $resultContent.innerHTML = str;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="在控件目录加入search-ejs"><a href="#在控件目录加入search-ejs" class="headerlink" title="在控件目录加入search.ejs"></a>在控件目录加入search.ejs</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">jacman\layout\_widget目录下创建search.ejs</div><div class="line">内容如下：</div><div class="line">&lt;% if (theme.swiftype_key) &#123; %&gt;</div><div class="line">  &lt;div class=&quot;form-group has-success has-feedback&quot; id=&quot;site_search&quot;&gt;</div><div class="line">    &lt;form class=&quot;site-search-form&quot;&gt;</div><div class="line">        &lt;input type=&quot;text&quot; id=&quot;st-search-input&quot; name=&quot;q&quot; results=&quot;0&quot; placeholder=&quot;&lt;%= __(&apos;search&apos;) %&gt;&quot; class=&quot;st-search-input st-default-search-input form-control&quot; /&gt;</div><div class="line">    &lt;/form&gt;</div><div class="line">  &lt;/div&gt;  </div><div class="line">&lt;% &#125; else &#123; %&gt;</div><div class="line">  &lt;div id=&quot;site_search&quot;&gt;</div><div class="line">   &lt;div class=&quot;form-group&quot;&gt;</div><div class="line">   &lt;label&gt;搜索&lt;/label&gt;</div><div class="line">    &lt;input type=&quot;text&quot; id=&quot;local-search-input&quot; name=&quot;q&quot; results=&quot;0&quot; placeholder=&quot;&lt;%= __(&apos;search&apos;) %&gt;&quot; class=&quot;st-search-input st-default-search-input form-control&quot;/&gt;</div><div class="line">   &lt;/div&gt;  </div><div class="line">  &lt;div id=&quot;local-search-result&quot;&gt;&lt;/div&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;% &#125; %&gt;</div></pre></td></tr></table></figure>
<h1 id="修改layout-partial目录下的header-ejs"><a href="#修改layout-partial目录下的header-ejs" class="headerlink" title="修改layout/_partial目录下的header.ejs"></a>修改layout/_partial目录下的header.ejs</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">删除&lt;li&gt;&lt;/li&gt;里的内容，保留&lt;li&gt;</div></pre></td></tr></table></figure>
<h1 id="修改layout-partial-after-footer-ejs"><a href="#修改layout-partial-after-footer-ejs" class="headerlink" title="修改layout/_partial/after_footer.ejs"></a>修改layout/_partial/after_footer.ejs</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">加入</div><div class="line">&lt;script src=&quot;&lt;%- config.root %&gt;js/search.js&quot;&gt;&lt;/script&gt;</div><div class="line"></div><div class="line">&lt;% if (config.search) &#123; %&gt;</div><div class="line">   &lt;script type=&quot;text/javascript&quot;&gt;      </div><div class="line">     var search_path = &quot;&lt;%= config.search.path %&gt;&quot;;</div><div class="line">	 if (search_path.length == 0) &#123;</div><div class="line">	 	search_path = &quot;search.xml&quot;;</div><div class="line">	 &#125;</div><div class="line">	 var path = &quot;&lt;%= config.root %&gt;&quot; + search_path;</div><div class="line">     searchFunc(path, &apos;local-search-input&apos;, &apos;local-search-result&apos;);</div><div class="line">   &lt;/script&gt;</div><div class="line">&lt;% &#125; %&gt;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hexo服务端安装部署]]></title>
      <url>https://lmrjgcs.github.io/2017/02/09/hexo%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/</url>
      <content type="html"><![CDATA[<h1 id="环境简介"><a href="#环境简介" class="headerlink" title="环境简介"></a>环境简介</h1><p>ubuntu14.04 + apache2 + php5 + hexo + git</p>
<h1 id="安装apache2、php5"><a href="#安装apache2、php5" class="headerlink" title="安装apache2、php5"></a>安装apache2、php5</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install -y apache2 php5</div></pre></td></tr></table></figure>
<h1 id="更改apache账户为可登录账户，并为其设置密码"><a href="#更改apache账户为可登录账户，并为其设置密码" class="headerlink" title="更改apache账户为可登录账户，并为其设置密码"></a>更改apache账户为可登录账户，并为其设置密码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vim /etc/passwd</div><div class="line">修改内容如下：</div><div class="line">www-data:x:33:33:www-data:/home/www-data:/bin/bash</div><div class="line">mkdir /home/www-data 创建用户根目录</div></pre></td></tr></table></figure>
<h1 id="gitlab上创建source仓库"><a href="#gitlab上创建source仓库" class="headerlink" title="gitlab上创建source仓库"></a>gitlab上创建source仓库</h1><h1 id="配置ssh秘钥"><a href="#配置ssh秘钥" class="headerlink" title="配置ssh秘钥"></a>配置ssh秘钥</h1><p>进入www-data用户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C &quot;test&quot; 创建sshkye</div></pre></td></tr></table></figure></p>
<p>把生成pubkey内容复制到gitlab上项目里的deploy keys里或用户ssh keys里</p>
<h1 id="hexo安装"><a href="#hexo安装" class="headerlink" title="hexo安装"></a>hexo安装</h1><h2 id="下载脚本并执行"><a href="#下载脚本并执行" class="headerlink" title="下载脚本并执行"></a>下载脚本并执行</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash -</div></pre></td></tr></table></figure>
<h2 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装nodejs</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">apt-get install -y nodejs</div><div class="line">apt-get install -y build-essential</div></pre></td></tr></table></figure>
<h2 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g hexo</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo -v #看到版本信息，则证明安装没问题</div></pre></td></tr></table></figure>
<h1 id="建立博客站点"><a href="#建立博客站点" class="headerlink" title="建立博客站点"></a>建立博客站点</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /home/www-data/</div><div class="line">hexo init blog-name</div></pre></td></tr></table></figure>
<h1 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a>配置主题</h1><h2 id="主题下载"><a href="#主题下载" class="headerlink" title="主题下载"></a>主题下载</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd blog-directory</div><div class="line">git clone https://github.com/wuchong/jacman.git themes/jacman</div></pre></td></tr></table></figure>
<h2 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h2><p>让主题支持本地搜索，见让jacman主题支持本地搜索这篇博客</p>
<h3 id="所写文章支持指定作者"><a href="#所写文章支持指定作者" class="headerlink" title="所写文章支持指定作者"></a>所写文章支持指定作者</h3><ul>
<li><p>注释掉站点配置文件_config.yml中的作者选项</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#author:</div></pre></td></tr></table></figure>
</li>
<li><p>更改脚本文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vim themes/jacman1/layout/_partial/post/header.ejs</div><div class="line">//&lt;a href=&quot;&lt;%= config.root %&gt;about&quot; title=&quot;&lt;%= config.author %&gt;&quot; target=&quot;_blank&quot; itemprop=&quot;author&quot;&gt;&lt;%= config.author %&gt;&lt;/a&gt;  #注释掉此行</div><div class="line">&lt;a&gt;&lt;%= item.author %&gt;&lt;/a&gt; #加入这行</div></pre></td></tr></table></figure>
</li>
<li><p>写文章抬头加入author参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">author:</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="配置主题配置文件"><a href="#配置主题配置文件" class="headerlink" title="配置主题配置文件"></a>配置主题配置文件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /themes/jacman/_config.yml</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">menu:</div><div class="line">  Home: /</div><div class="line">  Archives: /archives</div><div class="line">  About: /about</div><div class="line">更改为如下：</div><div class="line">menu:</div><div class="line">  主页: /</div><div class="line">  归档: /archives</div><div class="line">  关于: /about</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#author_img: #注释掉</div><div class="line">index:</div><div class="line">  expand: false   #更改false，让主页文章折叠起来</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">修改链接</div><div class="line">links:</div><div class="line">  github: https://github.com/</div></pre></td></tr></table></figure>
<h1 id="配置站点配置文件"><a href="#配置站点配置文件" class="headerlink" title="配置站点配置文件"></a>配置站点配置文件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">vim _config.yml</div><div class="line">title: AACHINA-BLOG  #站点名称</div><div class="line">language: zh-CN  #配置站点支持中文</div><div class="line">url: http://ip地址:4000  #站点路径</div><div class="line">post_asset_folder: true  #改为true，让hexo使用本地图片，需要安装插件：npm install hexo-asset-image --save</div><div class="line">theme: jacman 	#配置使用哪个主题</div></pre></td></tr></table></figure>
<h1 id="gitlab的webhook自动化部署hexo"><a href="#gitlab的webhook自动化部署hexo" class="headerlink" title="gitlab的webhook自动化部署hexo"></a>gitlab的webhook自动化部署hexo</h1><p>客户端有push动作，hexo服务端自动触发pull，下载更新</p>
<h1 id="配置git仓库"><a href="#配置git仓库" class="headerlink" title="配置git仓库"></a>配置git仓库</h1><p>进入www-data用户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">apt-get install -y git #安装git</div><div class="line">cd blog-directory/source</div><div class="line">git init #初始化git可以管理的仓库</div><div class="line">在gitlab上创建名为source的仓库</div><div class="line">git remote add origin git@gitlab地址:aachina/source.git #关联远程仓库</div><div class="line">git push -u origin master #把本地master分支推送到远端，并关联远端master分支</div></pre></td></tr></table></figure></p>
<h1 id="配置php"><a href="#配置php" class="headerlink" title="配置php"></a>配置php</h1><p>进入root账户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">cd /var/www/html</div><div class="line">vim test.php</div><div class="line">加入如下内容：</div><div class="line">&lt;?php</div><div class="line">$www_folder = &quot;/home/www-data/aachina-blog/source&quot; ;</div><div class="line">//git仓库地址</div><div class="line">$git_repo = &quot;git@gitlab地址:aachina/source.git&quot; ;</div><div class="line">//执行指令 </div><div class="line">echo shell_exec(&quot; cd $www_folder &amp;&amp; git pull $git_repo 2&gt;&amp;1 &quot;);</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h1 id="配置gitlab-webhook选项："><a href="#配置gitlab-webhook选项：" class="headerlink" title="配置gitlab webhook选项："></a>配置gitlab webhook选项：</h1><p><img src="/2017/02/09/hexo服务端安装部署/QQ截图20170116143613.png" alt="webhook"><br>配置路径及勾上push events<br><img src="/2017/02/09/hexo服务端安装部署/QQ图片20170116143810.png" alt="webhook1"></p>
<h1 id="hexo-server后台启动配置"><a href="#hexo-server后台启动配置" class="headerlink" title="hexo server后台启动配置"></a>hexo server后台启动配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vim /etc/rc.local</div><div class="line">加入：</div><div class="line">cd /home/www-data/aachina-blog &amp;&amp; nohup hexo s &amp;</div><div class="line">保存重启</div></pre></td></tr></table></figure>
<h1 id="参照链接："><a href="#参照链接：" class="headerlink" title="参照链接："></a>参照链接：</h1><ul>
<li><a href="https://hexo.io/zh-cn/" target="_blank" rel="external">hexo中文官网</a></li>
<li><a href="http://wuchong.me/blog/2014/11/20/how-to-use-jacman/" target="_blank" rel="external">jacman主题</a></li>
<li><a href="http://www.tuicool.com/articles/umEBVfI" target="_blank" rel="external">hexo无法使用本地图片</a></li>
</ul>
]]></content>
    </entry>
    
  
  
</search>
